<template>
  <div class="menu-nav">
    <p>组成</p>
    <el-menu active-text-color="#98a6ad" menu-trigger="click" text-color="#98a6ad" unique-opened>
      <el-sub-menu index="1">
        <template #title>
          <svg class="icon" height="200" p-id="14526" t="1649932205282"
               version="1.1" viewBox="0 0 1026 1024" width="200"
               xmlns="http://www.w3.org/2000/svg">
            <path
              d="M931.571183 1023.943658 641.471385 1023.943658c-51.60138 0-93.398472-65.628416-93.398472-117.229796L548.072913 641.506393c0-51.572603 41.797092-93.403477 93.398472-93.403477l290.098547 0c51.537569 0 93.398472 41.832125 93.398472 93.403477l0 289.038793C1024.969655 982.146566 983.108752 1023.943658 931.571183 1023.943658L931.571183 1023.943658zM976.990457 644.869579c0-26.32869-21.362736-47.662649-47.662649-47.662649L643.393205 597.206931c-26.294908 0-47.662649 21.333959-47.662649 47.662649l0 285.934603c0 26.294908 21.367741 47.657644 47.662649 47.657644l285.934603 0c26.299913 0 47.662649-21.362736 47.662649-47.657644L976.990457 644.869579 976.990457 644.869579zM931.571183 475.904526 641.471385 475.904526c-51.60138 0-93.398472-65.657194-93.398472-117.258574L548.072913 93.43348c0-51.567598 41.797092-93.433505 93.398472-93.433505l290.098547 0c51.537569 0 93.398472 41.865907 93.398472 93.433505l0 289.043798C1024.969655 434.073652 983.108752 475.904526 931.571183 475.904526L931.571183 475.904526zM976.990457 96.795414c0-26.298662-21.362736-47.661398-47.662649-47.661398L643.393205 49.134018c-26.294908 0-47.662649 21.362736-47.662649 47.661398l0 285.935854c0 26.32869 21.367741 47.661398 47.662649 47.661398l285.934603 0c26.299913 0 47.662649-21.332708 47.662649-47.661398L976.990457 96.795414 976.990457 96.795414zM383.49827 1023.943658 93.433505 1023.943658C41.797092 1023.943658 0 958.315242 0 906.713862L0 641.506393c0-51.572603 41.797092-93.403477 93.433505-93.403477l290.064764 0c51.572603 0 93.433505 41.832125 93.433505 93.403477l0 289.038793C476.901746 982.146566 435.070872 1023.943658 383.49827 1023.943658L383.49827 1023.943658zM428.917544 644.869579c0-26.32869-21.328954-47.662649-47.657644-47.662649L95.325297 597.206931c-26.299913 0-47.662649 21.333959-47.662649 47.662649l0 285.934603c0 26.294908 21.362736 47.657644 47.662649 47.657644l285.934603 0c26.32869 0 47.657644-21.362736 47.657644-47.657644L428.917544 644.869579 428.917544 644.869579zM383.49827 475.904526 93.433505 475.904526C41.797092 475.904526 0 410.247332 0 358.645953L0 93.43348c0-51.567598 41.797092-93.433505 93.433505-93.433505l290.064764 0c51.572603 0 93.433505 41.832125 93.433505 93.433505l0 289.043798C476.901746 434.073652 435.070872 475.904526 383.49827 475.904526L383.49827 475.904526zM428.917544 96.795414c0-26.298662-21.328954-47.661398-47.657644-47.661398L95.325297 49.134018c-26.299913 0-47.662649 21.362736-47.662649 47.661398l0 285.935854c0 26.32869 21.362736 47.661398 47.662649 47.661398l285.934603 0c26.32869 0 47.657644-21.332708 47.657644-47.661398L428.917544 96.795414 428.917544 96.795414zM428.917544 96.795414"
              fill="currentColor" p-id="14527" stroke-width="28"></path>
          </svg>
          <p>分类</p>
        </template>
        <el-menu-item v-for="type in types" :key="type.id.toString()">
          <div class="side-pane-types">
            <p>{{ type.name }}</p>
            <span>{{ type.articleNumber }}</span>
          </div>
        </el-menu-item>
      </el-sub-menu>
      <el-sub-menu index="2">
        <template #title>
          <svg class="icon" height="200" p-id="16712" t="1649932269188"
               version="1.1" viewBox="0 0 1024 1024" width="200"
               xmlns="http://www.w3.org/2000/svg">
            <path
              d="M790.08 718.08l-138.112 119.232V718.08h138.112zM198.848 132.992h627.328v516.16H617.088a34.56 34.56 0 0 0-34.816 34.432v206.528H198.848V132.992z m662.208-68.8H164.032a34.56 34.56 0 0 0-34.816 34.432v825.92a34.56 34.56 0 0 0 34.816 34.432h453.056l278.784-240.896V98.624a34.56 34.56 0 0 0-34.816-34.432z"
              fill="currentColor" p-id="16713" stroke-width="28"></path>
          </svg>
          <p>页面</p>
        </template>
        <el-menu-item index="2-1" @click="skip('/about', null)">
          <svg fill="none" height="16px"
               stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
               stroke-width="2" viewBox="0 0 24 24" width="16px"
               xmlns="http://www.w3.org/2000/svg">
            <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
            <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
            <line x1="6" x2="6" y1="1" y2="4"></line>
            <line x1="10" x2="10" y1="1" y2="4"></line>
            <line x1="14" x2="14" y1="1" y2="4"></line>
          </svg>
          <p>关于我</p>
        </el-menu-item>
      </el-sub-menu>
      <el-sub-menu index="3">
        <template #title>
          <svg class="icon" height="200" p-id="18904" t="1649932320109"
               version="1.1" viewBox="0 0 1024 1024" width="200"
               xmlns="http://www.w3.org/2000/svg">
            <path
              d="M563.2 672c-6.4-6.4 0 0 0 0L448 793.6c-57.6 57.6-153.6 57.6-211.2 0-57.6-57.6-64-147.2 0-211.2l121.6-121.6-6.4-6.4-38.4-32-6.4-6.4-121.6 121.6C108.8 614.4 108.8 755.2 192 832s217.6 83.2 300.8 0l121.6-121.6-6.4-6.4-44.8-32z m38.4-294.4c6.4 0 6.4 0 0 0l38.4 38.4 6.4 6.4-230.4 230.4-38.4-51.2 224-224zM531.2 192c83.2-83.2 217.6-83.2 300.8 0 83.2 83.2 83.2 217.6 0 300.8l-121.6 121.6-44.8-44.8 128-128c44.8-44.8 51.2-147.2-6.4-204.8-57.6-57.6-160-57.6-204.8-6.4l-128 128v-6.4l-38.4-38.4-6.4-6.4L531.2 192z"
              fill="currentColor" p-id="18905" stroke-width="28"></path>
          </svg>
          <p>链接</p>
        </template>
        <el-menu-item index="3-1" @click="skip('https://space.bilibili.com/522577863?spm_id_from=666.4.0.0')">
          <svg class="icon" height="200" p-id="2146" t="1651310061574"
               version="1.1" viewBox="0 0 1024 1024" width="200" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1019.54782609 345.3106087c-3.20556522-142.1133913-127.15408696-169.36069565-127.15408696-169.36069566s-96.70121739-0.53426087-222.25252174-1.60278261l91.3586087-88.15304347s14.42504348-18.16486957-10.15095652-38.46678261c-24.576-20.30191304-26.17878261-11.21947826-34.72695653-5.87686957-7.47965217 5.3426087-117.00313043 112.72904348-136.23652174 131.96243479-49.68626087 0-101.50956522-0.53426087-151.73008695-0.53426087h17.63060869S315.392 43.98747826 306.84382609 38.1106087s-9.61669565-14.42504348-34.72695652 5.87686956c-24.576 20.30191304-10.15095652 38.46678261-10.15095653 38.46678261l93.49565218 90.82434783c-101.50956522 0-189.12834783 0.53426087-229.73217392 2.13704347C-5.69878261 213.34817391 4.45217391 345.3106087 4.45217391 345.3106087s1.60278261 283.15826087 0 426.34017391c14.42504348 143.18191304 124.48278261 166.15513043 124.48278261 166.15513043s43.8093913 1.06852174 76.39930435 1.06852174c3.20556522 9.08243478 5.87686957 53.96034783 56.0973913 53.96034783 49.68626087 0 56.0973913-53.96034783 56.09739131-53.96034783s365.96869565-1.60278261 396.42156522-1.60278261c1.60278261 15.49356522 9.08243478 56.63165217 59.30295652 56.09739131 49.68626087-1.06852174 53.42608696-59.30295652 53.42608695-59.30295652s17.09634783-1.60278261 67.85113044 0c118.60591304-21.90469565 125.55130435-160.81252174 125.55130435-160.81252174s-2.13704348-285.82956522-0.53426087-427.94295652z m-102.04382609 453.05321739c0 22.43895652-17.6306087 40.60382609-39.53530435 40.60382608h-721.25217391c-21.90469565 0-39.53530435-18.16486957-39.53530435-40.60382608V320.20034783c0-22.43895652 17.6306087-40.60382609 39.53530435-40.60382609h721.25217391c21.90469565 0 39.53530435 18.16486957 39.53530435 40.60382609v478.16347826z"
              fill="#1296db" p-id="2147">
            </path>
            <path
              d="M409.088 418.816l-203.264 38.912 17.408 76.288 201.216-38.912zM518.656 621.056c-49.664 106.496-94.208 26.112-94.208 26.112l-33.28 21.504s65.536 89.6 128 21.504c73.728 68.096 130.048-22.016 130.048-22.016l-30.208-19.456c0-0.512-52.736 75.776-100.352-27.648zM619.008 495.104l201.728 38.912 16.896-76.288-202.752-38.912z"
              fill="#1296db" p-id="2148">
            </path>
          </svg>
          <p>哔哩哔哩</p>
        </el-menu-item>
        <el-menu-item index="3-1" @click="skip('https://gitHub.com/wonder-light')">
          <svg class="icon" height="200" p-id="1344" t="1651310527265"
               version="1.1" viewBox="0 0 1049 1024" width="200" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z"
              fill="#191717" p-id="1345">
            </path>
            <path
              d="M199.040177 753.571326c-0.869171 2.607513-5.215026 3.476684-8.691711 1.738342s-6.084198-5.215026-4.345855-7.82254c0.869171-2.607513 5.215026-3.476684 8.691711-1.738342s5.215026 5.215026 4.345855 7.82254z m-6.953369-4.345856M219.900283 777.038945c-2.607513 2.607513-7.82254 0.869171-10.430053-2.607514-3.476684-3.476684-4.345855-8.691711-1.738342-11.299224 2.607513-2.607513 6.953369-0.869171 10.430053 2.607514 3.476684 4.345855 4.345855 9.560882 1.738342 11.299224z m-5.215026-5.215027M240.760389 807.459932c-3.476684 2.607513-8.691711 0-11.299224-4.345855-3.476684-4.345855-3.476684-10.430053 0-12.168395 3.476684-2.607513 8.691711 0 11.299224 4.345855 3.476684 4.345855 3.476684 9.560882 0 12.168395z m0 0M269.443034 837.011749c-2.607513 3.476684-8.691711 2.607513-13.906737-1.738342-4.345855-4.345855-6.084198-10.430053-2.607513-13.037566 2.607513-3.476684 8.691711-2.607513 13.906737 1.738342 4.345855 3.476684 5.215026 9.560882 2.607513 13.037566z m0 0M308.555733 853.526c-0.869171 4.345855-6.953369 6.084198-13.037566 4.345855-6.084198-1.738342-9.560882-6.953369-8.691711-10.430053 0.869171-4.345855 6.953369-6.084198 13.037566-4.345855 6.084198 1.738342 9.560882 6.084198 8.691711 10.430053z m0 0M351.145116 857.002684c0 4.345855-5.215026 7.82254-11.299224 7.82254-6.084198 0-11.299224-3.476684-11.299224-7.82254s5.215026-7.82254 11.299224-7.82254c6.084198 0 11.299224 3.476684 11.299224 7.82254z m0 0M391.126986 850.049315c0.869171 4.345855-3.476684 8.691711-9.560882 9.560882-6.084198 0.869171-11.299224-1.738342-12.168395-6.084197-0.869171-4.345855 3.476684-8.691711 9.560881-9.560882 6.084198-0.869171 11.299224 1.738342 12.168396 6.084197z m0 0"
              fill="#191717" p-id="1346">
            </path>
          </svg>
          <p>GitHub</p>
        </el-menu-item>
        <el-menu-item index="3-1" @click="skip('https://gitee.com/wonder-light')">
          <svg class="icon" height="200" p-id="5738" t="1651310484685"
               version="1.1" viewBox="0 0 1024 1024" width="200" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m284.8 313.6c0 12.8-12.8 25.6-25.6 25.6H416c-41.6 0-76.8 35.2-76.8 76.8v243.2c0 12.8 12.8 25.6 25.6 25.6h240c41.6 0 76.8-35.2 76.8-76.8v-12.8c0-12.8-12.8-25.6-25.6-25.6H480c-12.8 0-25.6-12.8-25.6-25.6v-64c0-12.8 12.8-25.6 25.6-25.6h291.2c12.8 0 25.6 12.8 25.6 25.6v144c0 92.8-76.8 169.6-169.6 169.6H252.8c-12.8 0-25.6-12.8-25.6-25.6V412.8C227.2 310.4 310.4 224 416 224h355.2c12.8 0 25.6 12.8 25.6 25.6v64z"
              fill="#B32225" p-id="5739">
            </path>
          </svg>
          <p>Gitee</p>
        </el-menu-item>
      </el-sub-menu>
    </el-menu>
  </div>
</template>

<!-- 菜单组成部分 -->
<script setup>
import { inject } from "vue";
import { useRouter } from "vue-router";
import { storeToRefs } from "pinia/dist/pinia";
import { useCounterStore } from "@/stores/counter";

const store = useCounterStore();
const {types} = storeToRefs(store);

const router = useRouter();
const {animEnd} = inject('animEnd');
const closeMenuPanel = inject('closeMenuPanel');

//更新分类
if (!types.value) {
    await store.updateTypes();
}


//跳转网页
function skip(url, target = '_blank') {
    if (animEnd.value) {
        closeMenuPanel();
        if (target == null) {
            router.push(url);
        }
        else {
            window.open(url, target);
        }
    }
}
</script>